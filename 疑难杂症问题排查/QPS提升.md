提升 QPS

目录

# 思路

QPS = 机器数量 * 单机并发数 * (1s/单次查询耗时)

## 单机性能瓶颈

一般是 CPU/Mem 瓶颈，扩容即可（Mafka 扩容即扩 partition）。

## 单次查询耗时多

链路慢一般是 mysql 或者 rpc 耗时长，可进行优化。

## 单机并发低

# 实践

## CrossAlgo2 mq 积压

- 查看 机器指标各项均正常，排除单机性能瓶颈；
- 查看 topic partition = 8，通过调整限流阈值，单机 qps 上限约 250，所以总体 qps = 2000 左右；